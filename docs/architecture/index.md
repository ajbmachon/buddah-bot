# BuddahBot Fullstack Architecture Document

## Table of Contents

- [BuddahBot Fullstack Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [Platform and Infrastructure Choice](./high-level-architecture.md#platform-and-infrastructure-choice)
    - [Repository Structure](./high-level-architecture.md#repository-structure)
    - [High Level Architecture Diagram](./high-level-architecture.md#high-level-architecture-diagram)
    - [Architectural Patterns](./high-level-architecture.md#architectural-patterns)
  - [Tech Stack](./tech-stack.md)
    - [Critical Version Notes](./tech-stack.md#critical-version-notes)
    - [Installation Commands](./tech-stack.md#installation-commands)
  - [Data Models](./data-models.md)
    - [1. User (Auth Session)](./data-models.md#1-user-auth-session)
    - [2. ChatMessage](./data-models.md#2-chatmessage)
    - [3. NousAPIRequest](./data-models.md#3-nousapirequest)
    - [4. NousAPIResponse (Streaming)](./data-models.md#4-nousapiresponse-streaming)
    - [5. ConversationMode](./data-models.md#5-conversationmode)
    - [6. APIError](./data-models.md#6-apierror)
    - [Data Flow Summary](./data-models.md#data-flow-summary)
  - [API Specification](./api-specification.md)
    - [REST API:  (OpenAI-Compatible Streaming)](./api-specification.md#rest-api-openai-compatible-streaming)
      - [Request Format](./api-specification.md#request-format)
      - [Response Format (SSE Streaming)](./api-specification.md#response-format-sse-streaming)
      - [Error Responses](./api-specification.md#error-responses)
      - [Implementation Notes](./api-specification.md#implementation-notes)
  - [Components](./components.md)
    - [System Component Breakdown](./components.md#system-component-breakdown)
    - [Component 1: Authentication Handler](./components.md#component-1-authentication-handler)
    - [Component 2: Chat Streaming Proxy (Edge)](./components.md#component-2-chat-streaming-proxy-edge)
    - [Component 3: Assistance UI Runtime](./components.md#component-3-assistance-ui-runtime)
    - [Component 4: System Prompt Manager](./components.md#component-4-system-prompt-manager)
    - [Component 5: Auth Pages (Login/Error)](./components.md#component-5-auth-pages-loginerror)
    - [Component 6: Rate Limiter (Optional for MVP)](./components.md#component-6-rate-limiter-optional-for-mvp)
    - [Component Interaction Diagram](./components.md#component-interaction-diagram)
  - [External APIs](./external-apis.md)
    - [1. Nous Research Portal API](./external-apis.md#1-nous-research-portal-api)
      - [POST ](./external-apis.md#post)
    - [2. Google OAuth API](./external-apis.md#2-google-oauth-api)
    - [3. Email Provider (Resend)](./external-apis.md#3-email-provider-resend)
      - [POST ](./external-apis.md#post)
    - [External API Summary Table](./external-apis.md#external-api-summary-table)
  - [Core Workflows](./core-workflows.md)
    - [Workflow 1: Google OAuth Authentication](./core-workflows.md#workflow-1-google-oauth-authentication)
    - [Workflow 2: Email Magic Link Authentication](./core-workflows.md#workflow-2-email-magic-link-authentication)
    - [Workflow 3: Chat Streaming (Happy Path)](./core-workflows.md#workflow-3-chat-streaming-happy-path)
    - [Workflow 4: Error Handling (Network/API Failure)](./core-workflows.md#workflow-4-error-handling-networkapi-failure)
    - [Workflow 5: Session Expiry Mid-Chat](./core-workflows.md#workflow-5-session-expiry-mid-chat)
  - [Frontend Architecture](./frontend-architecture.md)
    - [Component Organization](./frontend-architecture.md#component-organization)
    - [Component Templates](./frontend-architecture.md#component-templates)
      - [Main Chat Page](./frontend-architecture.md#main-chat-page)
      - [Thread Component](./frontend-architecture.md#thread-component)
      - [Composer Component](./frontend-architecture.md#composer-component)
      - [Message Components](./frontend-architecture.md#message-components)
    - [State Management](./frontend-architecture.md#state-management)
    - [Routing Architecture](./frontend-architecture.md#routing-architecture)
    - [Frontend Services Layer](./frontend-architecture.md#frontend-services-layer)
  - [Backend Architecture](./backend-architecture.md)
    - [Service Architecture: Serverless (Vercel)](./backend-architecture.md#service-architecture-serverless-vercel)
    - [Edge Runtime: Chat Streaming](./backend-architecture.md#edge-runtime-chat-streaming)
    - [Node Runtime: Authentication](./backend-architecture.md#node-runtime-authentication)
    - [Authentication Middleware](./backend-architecture.md#authentication-middleware)
  - [Unified Project Structure](./unified-project-structure.md)
  - [Development Workflow](./development-workflow.md)
    - [Prerequisites](./development-workflow.md#prerequisites)
    - [Initial Setup](./development-workflow.md#initial-setup)
    - [Development Commands](./development-workflow.md#development-commands)
    - [Environment Configuration](./development-workflow.md#environment-configuration)
      - [Required Environment Variables](./development-workflow.md#required-environment-variables)
    - [Development Workflow Best Practices](./development-workflow.md#development-workflow-best-practices)
  - [Deployment Architecture](./deployment-architecture.md)
    - [Deployment Strategy](./deployment-architecture.md#deployment-strategy)
    - [Frontend Deployment](./deployment-architecture.md#frontend-deployment)
    - [Backend Deployment](./deployment-architecture.md#backend-deployment)
    - [CI/CD Pipeline](./deployment-architecture.md#cicd-pipeline)
    - [Environments](./deployment-architecture.md#environments)
    - [Deployment Checklist](./deployment-architecture.md#deployment-checklist)
    - [Rollback Strategy](./deployment-architecture.md#rollback-strategy)
    - [Performance Optimization](./deployment-architecture.md#performance-optimization)
  - [Security and Performance](./security-and-performance.md)
    - [Frontend Security](./security-and-performance.md#frontend-security)
    - [Backend Security](./security-and-performance.md#backend-security)
    - [Authentication Security](./security-and-performance.md#authentication-security)
    - [Performance Optimization](./security-and-performance.md#performance-optimization)
    - [Security Headers](./security-and-performance.md#security-headers)
    - [Performance Monitoring](./security-and-performance.md#performance-monitoring)
  - [Testing Strategy](./testing-strategy.md)
    - [Testing Pyramid](./testing-strategy.md#testing-pyramid)
    - [Frontend Tests](./testing-strategy.md#frontend-tests)
    - [Backend Tests](./testing-strategy.md#backend-tests)
    - [E2E Tests](./testing-strategy.md#e2e-tests)
    - [Test Commands](./testing-strategy.md#test-commands)
  - [Coding Standards](./coding-standards.md)
    - [Critical Fullstack Rules](./coding-standards.md#critical-fullstack-rules)
    - [Naming Conventions](./coding-standards.md#naming-conventions)
    - [Code Organization Rules](./coding-standards.md#code-organization-rules)
    - [Anti-Patterns to Avoid](./coding-standards.md#anti-patterns-to-avoid)
  - [Error Handling Strategy](./error-handling-strategy.md)
    - [Error Flow](./error-handling-strategy.md#error-flow)
    - [Error Response Format](./error-handling-strategy.md#error-response-format)
    - [Frontend Error Handling](./error-handling-strategy.md#frontend-error-handling)
    - [Backend Error Handling](./error-handling-strategy.md#backend-error-handling)
    - [User-Facing Error Messages](./error-handling-strategy.md#user-facing-error-messages)
  - [Monitoring and Observability](./monitoring-and-observability.md)
    - [Monitoring Stack](./monitoring-and-observability.md#monitoring-stack)
    - [Key Metrics](./monitoring-and-observability.md#key-metrics)
    - [Logging Strategy](./monitoring-and-observability.md#logging-strategy)
    - [Alerting (Optional for MVP)](./monitoring-and-observability.md#alerting-optional-for-mvp)
    - [Debugging Workflow](./monitoring-and-observability.md#debugging-workflow)
    - [Performance Debugging](./monitoring-and-observability.md#performance-debugging)
    - [Monitoring Checklist](./monitoring-and-observability.md#monitoring-checklist)
