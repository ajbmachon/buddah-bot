# Story 4.2: Execute PRD Validation Checklist

## Status
Draft

## Story
**As a** product owner,
**I want** to verify all PRD requirements are met,
**so that** the application is ready for launch.

## Acceptance Criteria
1. PRD validation checklist (Section 11) executed completely
2. All checklist items verified:
   - Authentication working (Google OAuth + Email)
   - Chat streaming functional with panel format
   - History persistence working across sessions
   - Performance targets met
   - Error handling comprehensive
   - Environment variables documented
3. Any checklist failures documented with remediation plan
4. Documentation updated:
   - README with setup instructions
   - Environment variables guide
   - Deployment instructions
5. Known limitations documented clearly
6. Post-launch monitoring plan defined

## Tasks / Subtasks

- [ ] **Task 1: Execute Authentication checklist** (AC: 2)
  - [ ] Test Google OAuth end-to-end (sign in → chat → sign out → sign in again)
  - [ ] Test Email magic link if implemented (sign in → check inbox → click link → chat)
  - [ ] Verify session persists across page refreshes (F5, close/reopen browser)
  - [ ] Test unauthenticated redirect (visit `/` without session → redirects to `/login`)
  - [ ] Test sign out works and clears session
  - [ ] Document any issues found

- [ ] **Task 2: Execute Chat checklist** (AC: 2)
  - [ ] Send message → verify streaming response appears (< 2s time-to-first-token)
  - [ ] Verify panel prompt produces 3-voice responses (Eckhart Tolle, Tara Brach, Alan Watts, etc.)
  - [ ] Compare response quality to direct Nous Portal testing (should match)
  - [ ] Test regenerate button works
  - [ ] Test edit message works (if implemented by Assistance UI)
  - [ ] Test voice input works (Assistance UI feature)
  - [ ] Document any issues found

- [ ] **Task 3: Execute Chat History checklist** (AC: 2)
  - [ ] Send messages → refresh page (F5) → verify messages persist
  - [ ] Verify thread ID in URL (`?threadId=...`)
  - [ ] Load existing thread → verify previous messages display
  - [ ] Create new conversation → verify unique thread ID generated
  - [ ] Check thread list displays all user conversations (AssistantCloud sidebar)
  - [ ] Verify thread titles auto-generated from first message
  - [ ] Confirm AssistantCloud handles TTL (90 days default - check dashboard settings)
  - [ ] Document any issues found

- [ ] **Task 4: Execute Modes checklist** (AC: 2)
  - [ ] Verify default panel mode is active (3-voice responses)
  - [ ] Test changing `BUDDHABOT_MODE` env var switches prompt (optional - can defer to post-MVP)
  - [ ] Document that custom panel and wisdom modes are future features
  - [ ] Document any issues found

- [ ] **Task 5: Execute Deployment checklist** (AC: 2)
  - [ ] Deploy to Vercel production environment
  - [ ] Verify all environment variables set correctly in Vercel dashboard:
    - `AUTH_SECRET`
    - `GOOGLE_CLIENT_ID` / `GOOGLE_CLIENT_SECRET`
    - `NOUS_API_KEY`
    - `NEXT_PUBLIC_ASSISTANT_BASE_URL`
    - `ASSISTANT_API_KEY`
    - (Email provider vars if implemented)
  - [ ] Test Edge function streaming works in production
  - [ ] Check Vercel function logs for errors (first 30 min after deploy)
  - [ ] Document any issues found

- [ ] **Task 6: Execute Quality checklist** (AC: 2)
  - [ ] Verify UI is clean and distraction-free (post-Story 4.1 branding)
  - [ ] Test mobile responsive design (iOS Safari, Android Chrome)
  - [ ] Test basic error scenarios and verify user-friendly messages:
    - Network disconnect mid-stream → "Connection lost. Try again?"
    - Invalid session → Redirects to login
    - Nous API error → "Something went wrong. Try again?"
  - [ ] Verify loading states feel calm (skeleton loaders, "Loading..." text)
  - [ ] Document any issues found

- [ ] **Task 7: Update README with setup instructions** (AC: 4)
  - [ ] Document project overview and purpose
  - [ ] Add setup instructions for local development:
    - Clone repo
    - Install dependencies (`npm install`)
    - Copy `.env.example` to `.env.local`
    - Configure environment variables
    - Run dev server (`npm run dev`)
  - [ ] Document how to get Nous API key (portal.nousresearch.com)
  - [ ] Document how to create AssistantCloud account
  - [ ] Keep it simple - friends/family won't be running this locally

- [ ] **Task 8: Document environment variables** (AC: 4)
  - [ ] Update `.env.example` with all required variables and descriptions
  - [ ] Document which vars are required vs optional
  - [ ] Document how to obtain each value (Google OAuth, Nous API, AssistantCloud)
  - [ ] Add comments explaining each variable's purpose

- [ ] **Task 9: Add deployment instructions** (AC: 4)
  - [ ] Document Vercel deployment steps:
    - Connect GitHub repo to Vercel
    - Configure environment variables in Vercel dashboard
    - Deploy
  - [ ] Document production domain setup (if custom domain used)
  - [ ] Keep it simple - one-time setup

- [ ] **Task 10: Document known limitations** (AC: 5)
  - [ ] List MVP limitations clearly:
    - Only panel mode available (no custom panel or wisdom modes yet)
    - Manual testing only (no automated tests)
    - Basic error messages (no enterprise error handling)
    - Friends/family only (not public/commercial)
  - [ ] Document any technical limitations discovered during testing
  - [ ] Add to README or separate `LIMITATIONS.md`

- [ ] **Task 11: Define post-launch monitoring plan** (AC: 6)
  - [ ] Document how to monitor application health:
    - Check Vercel function logs daily (first week)
    - Monitor Nous API usage in Nous Portal dashboard
    - Check AssistantCloud usage/limits in dashboard
  - [ ] Document how users can report issues (email, messaging, etc.)
  - [ ] Define what "critical issue" means (app down, auth broken, etc.)
  - [ ] Plan for quick fixes vs. scheduled updates
  - [ ] Keep it simple - personal project, not 24/7 SLA

- [ ] **Task 12: Create remediation plan for any failures** (AC: 3)
  - [ ] Review all documented issues from Tasks 1-6
  - [ ] Prioritize issues: Critical (blocks launch) vs. Minor (can fix post-launch)
  - [ ] Fix critical issues before launch
  - [ ] Document minor issues for future iteration
  - [ ] Re-run affected checklist items after fixes

## Dev Notes

### Architecture Context

**PRD Validation Checklist Location** [Source: docs/prd/11-validation-checklist.md]
The full checklist is in PRD Section 11 with categories:
- Auth (5 items)
- Chat (6 items)
- Chat History (7 items)
- Modes (3 items)
- Deployment (4 items)
- Quality (4 items)

**Project Structure** [Source: architecture/unified-project-structure.md]
```
docs/
├── prd/
│   └── 11-validation-checklist.md  # Reference checklist here
├── README.md                        # Update with setup instructions
└── ...

.env.example                         # Update with all required vars
.env.local                           # Local dev vars (gitignored)
```

**Environment Variables** [Source: PRD Section 6 - Configuration & Environment Variables]
Required variables:
- `AUTH_SECRET` - NextAuth session encryption
- `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET` - Google OAuth
- `NOUS_API_KEY` - Nous Portal API access
- `NEXT_PUBLIC_ASSISTANT_BASE_URL` - AssistantCloud frontend URL
- `ASSISTANT_API_KEY` - AssistantCloud server-side API key
- (Optional) Email provider vars if Email magic link implemented

**Performance Targets** [Source: PRD Section 2 - Success Criteria]
- **Streaming start:** < 2 seconds (time-to-first-token)
- **Request completion:** > 99% success rate
- **Thread restoration:** < 500ms (Epic 3 target)

**AssistantCloud Configuration** [Source: Epic 3 context]
- User ID from Auth.js session (email)
- Thread persistence automatic
- TTL default is 90 days (check dashboard settings)
- Free tier limits apply (check dashboard)

**Deployment** [Source: architecture/tech-stack.md]
- **Platform:** Vercel (zero DevOps)
- **CI/CD:** Auto-deploy on git push
- **Monitoring:** Vercel Analytics + Function Logs
- **Domain:** Vercel-provided or custom domain

### Previous Story Context
Story 4.1 (Minimal Branding and Styling) should be complete. The UI should have:
- Custom favicon and page title
- Calm color scheme (not all white)
- Clean typography
- Polished header, thread, and composer styling
- Mobile responsive design

### Important Constraints

**Keep It Simple** (Philosophy)
- This is a friends/family passion project
- Manual testing is fine - no need for automated test suites
- Basic error messages are fine - no enterprise error codes
- README should be clear but concise

**Focus on Launch Readiness** (AC: 1-3)
- All critical functionality must work (auth, chat, persistence)
- Nice-to-have features can be deferred (custom modes, advanced error handling)
- Document workarounds for minor issues if needed

**Documentation for Future You** (AC: 4-6)
- README should help you remember setup steps in 6 months
- Environment variable docs prevent "what was this for?" confusion
- Known limitations prevent feature requests for deferred items
- Monitoring plan prevents "is it working?" anxiety

### Testing

**Manual Testing Only** [Source: architecture/testing-strategy.md]
- MVP uses manual testing (no automated tests)
- Use browser DevTools and Vercel dashboard for debugging
- Test on real devices (mobile) if possible

**Testing Approach for This Story:**
- Work through PRD checklist systematically (Section 11)
- Test each item in production-like environment (Vercel preview or production)
- Document results: ✅ Pass, ❌ Fail (with details), ⚠️ Partial (with notes)
- Create remediation plan for failures
- Re-test after fixes

**Basic Error Testing** (merged from deleted Story 4.2):
- Network disconnect: Display simple "Connection lost. Try again?"
- Invalid session: Redirect to login gracefully
- Nous API error: Display simple "Something went wrong. Try again?"
- Empty messages: Send button disabled
- No enterprise error codes needed - keep it simple!

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-09 | 1.0 | Initial story draft created | Scrum Master (Bob) |

## Dev Agent Record

### Agent Model Used
(To be filled by Dev Agent)

### Debug Log References
(To be filled by Dev Agent)

### Completion Notes List
(To be filled by Dev Agent)

### File List
(To be filled by Dev Agent)

## QA Results
(To be filled by QA Agent)
